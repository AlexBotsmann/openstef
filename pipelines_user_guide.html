<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pipelines user guide &mdash; OpenSTEF  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Concepts" href="concepts.html" />
    <link rel="prev" title="User guides" href="user_guides.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> OpenSTEF
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="user_guides.html">User guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="user_guides.html#pipelines-high-level-functionality">Pipelines - high level functionality</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Pipelines user guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#task-implementation">Task implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pipeline-implementation">Pipeline implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_guides.html#forecasting-application-full-implementation">Forecasting application - full implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guides.html#example-jupyter-notebooks">Example Jupyter notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="dazls.html">Domain Adaptation for Zero Shot Learning in Sequence (DAZLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_modules.html">Code modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenSTEF</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="user_guides.html">User guides</a></li>
      <li class="breadcrumb-item active">Pipelines user guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pipelines_user_guide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="pipelines-user-guide">
<span id="pipeline-user-guide"></span><h1>Pipelines user guide<a class="headerlink" href="#pipelines-user-guide" title="Permalink to this headline">¶</a></h1>
<p>As mentioned in the <a class="reference internal" href="concepts.html#concepts"><span class="std std-ref">concepts</span></a> section, tasks are an extension of pipelines, that include getting data from a database,
raising task exceptions, and writing data to a database. In an operational setting, both tasks and pipelines can be used.
The main difference is that an operational application that leverages OpenSTEF’s tasks fuctionality is easier to implement,
whereas the pipeline functionality offers more flexibility in terms of design and implementation in addition to offering more scalability.</p>
<p>To illustrate the task as well as the pipeline <a class="reference internal" href="concepts.html#concepts"><span class="std std-ref">concept</span></a>, code snippets for both implementations are presented below.
These code snippets show two different ways in which OpenSTEF’s pipeline functionality can be integrated within an application that runs in an operational setting.</p>
<div class="section" id="task-implementation">
<h2>Task implementation<a class="headerlink" href="#task-implementation" title="Permalink to this headline">¶</a></h2>
<p>Let’s first have a look at the task implementation, which is also the way it is done in the <a class="reference external" href="https://github.com/OpenSTEF/openstef-reference">GitHub repository containing the reference implementation</a>.
In the case that model training, hyperparameter tuning, or forecasting is supposed to be ran according to a certain schedule, using CronJobs for example,
the task implementation is easy to set up.
However this implementation’s scalability is limited. Additionally, this implementation relies on the <a class="reference external" href="https://pypi.org/project/openstef-dbc/">the OpenSTEF database connector</a>, <code class="docutils literal notranslate"><span class="pre">openstef-dbc</span></code>,
meaning that the databases have to be set up according to the <a class="reference external" href="https://github.com/OpenSTEF/openstef-reference">reference implementation</a>.
Below, code snippets are shown for different types of tasks that demonstrate the use of OpenSTEF’s task functionality.</p>
<p>Note that, apart from the imports, the implementation is the same for each type of task.</p>
<div class="section" id="train-model-task-implementation">
<h3>Train model task implementation<a class="headerlink" href="#train-model-task-implementation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">openstef.tasks</span> <span class="kn">import</span> <span class="n">train_model</span> <span class="k">as</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.config.config</span> <span class="kn">import</span> <span class="n">ConfigManager</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.database</span> <span class="kn">import</span> <span class="n">DataBase</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.log</span> <span class="kn">import</span> <span class="n">logging</span>

<span class="n">PROJECT_ROOT</span> <span class="o">-</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Initialize config manager</span>
    <span class="n">config</span> <span class="o">-</span> <span class="n">ConfigManager</span><span class="o">.</span><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_root</span><span class="o">-</span><span class="n">PROJECT_ROOT</span><span class="p">)</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="c1"># Initialize logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">loglevel</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">loglevel</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
    <span class="c1"># Initialize database connection</span>
    <span class="n">database</span> <span class="o">-</span> <span class="n">DataBase</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="o">-</span><span class="n">database</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">--</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="create-forecast-task-implementation">
<h3>Create forecast task implementation<a class="headerlink" href="#create-forecast-task-implementation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">openstef.tasks</span> <span class="kn">import</span> <span class="n">create_forecast</span> <span class="k">as</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.config.config</span> <span class="kn">import</span> <span class="n">ConfigManager</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.database</span> <span class="kn">import</span> <span class="n">DataBase</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.log</span> <span class="kn">import</span> <span class="n">logging</span>

<span class="n">PROJECT_ROOT</span> <span class="o">-</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Initialize config manager</span>
    <span class="n">config</span> <span class="o">-</span> <span class="n">ConfigManager</span><span class="o">.</span><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_root</span><span class="o">-</span><span class="n">PROJECT_ROOT</span><span class="p">)</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="c1"># Initialize logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">loglevel</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">loglevel</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
    <span class="c1"># Initialize database connection</span>
    <span class="n">database</span> <span class="o">-</span> <span class="n">DataBase</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="o">-</span><span class="n">database</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">--</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="optimize-hyperparameters-task-implementation">
<h3>Optimize hyperparameters task implementation<a class="headerlink" href="#optimize-hyperparameters-task-implementation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">openstef.tasks</span> <span class="kn">import</span> <span class="n">optimize_hyperparameters</span> <span class="k">as</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.config.config</span> <span class="kn">import</span> <span class="n">ConfigManager</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.database</span> <span class="kn">import</span> <span class="n">DataBase</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.log</span> <span class="kn">import</span> <span class="n">logging</span>

<span class="n">PROJECT_ROOT</span> <span class="o">-</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Initialize config manager</span>
    <span class="n">config</span> <span class="o">-</span> <span class="n">ConfigManager</span><span class="o">.</span><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_root</span><span class="o">-</span><span class="n">PROJECT_ROOT</span><span class="p">)</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="c1"># Initialize logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">loglevel</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">loglevel</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
    <span class="c1"># Initialize database connection</span>
    <span class="n">database</span> <span class="o">-</span> <span class="n">DataBase</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="o">-</span><span class="n">database</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">--</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="create-components-forecast-task-implementation">
<h3>Create components forecast task implementation<a class="headerlink" href="#create-components-forecast-task-implementation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">openstef.tasks</span> <span class="kn">import</span> <span class="n">create_components_forecast</span> <span class="k">as</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.config.config</span> <span class="kn">import</span> <span class="n">ConfigManager</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.database</span> <span class="kn">import</span> <span class="n">DataBase</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.log</span> <span class="kn">import</span> <span class="n">logging</span>

<span class="n">PROJECT_ROOT</span> <span class="o">-</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Initialize config manager</span>
    <span class="n">config</span> <span class="o">-</span> <span class="n">ConfigManager</span><span class="o">.</span><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_root</span><span class="o">-</span><span class="n">PROJECT_ROOT</span><span class="p">)</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="c1"># Initialize logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">loglevel</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">loglevel</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
    <span class="c1"># Initialize database connection</span>
    <span class="n">database</span> <span class="o">-</span> <span class="n">DataBase</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="o">-</span><span class="n">database</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">--</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="create-base-case-forecast-task-implementation">
<h3>Create base case forecast task implementation<a class="headerlink" href="#create-base-case-forecast-task-implementation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">openstef.tasks</span> <span class="kn">import</span> <span class="n">create_basecase_forecast</span> <span class="k">as</span> <span class="n">task</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.config.config</span> <span class="kn">import</span> <span class="n">ConfigManager</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.database</span> <span class="kn">import</span> <span class="n">DataBase</span>
<span class="kn">from</span> <span class="nn">openstef_dbc.log</span> <span class="kn">import</span> <span class="n">logging</span>

<span class="n">PROJECT_ROOT</span> <span class="o">-</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Initialize config manager</span>
    <span class="n">config</span> <span class="o">-</span> <span class="n">ConfigManager</span><span class="o">.</span><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_root</span><span class="o">-</span><span class="n">PROJECT_ROOT</span><span class="p">)</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="c1"># Initialize logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">loglevel</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">loglevel</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>
    <span class="c1"># Initialize database connection</span>
    <span class="n">database</span> <span class="o">-</span> <span class="n">DataBase</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">config</span><span class="p">,</span> <span class="n">database</span><span class="o">-</span><span class="n">database</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">--</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pipeline-implementation">
<h2>Pipeline implementation<a class="headerlink" href="#pipeline-implementation" title="Permalink to this headline">¶</a></h2>
<p>The pipeline implementation does not rely on <a class="reference external" href="https://pypi.org/project/openstef-dbc/">the OpenSTEF database connector</a>, <code class="docutils literal notranslate"><span class="pre">openstef-dbc</span></code>.
Therefore, pipelines can be used together with any kind of database setup, unlike tasks,
which require databases to be implemented according to the <a class="reference external" href="https://github.com/OpenSTEF/openstef-reference">reference implementation</a>.</p>
<p>A more scalable and arguably more neat set up than the <a class="reference external" href="https://github.com/OpenSTEF/openstef-reference">reference implementation</a>,
is to expose the OpenSTEF pipeline functionality through an API,
for instance by using the <a class="reference external" href="https://fastapi.tiangolo.com/">FastAPI framework</a>.
The code snippet below shows how OpenSTEF pipelines can be integrated into an API using the
<a class="reference external" href="https://mpuig.github.io/Notes/fastapi_basics/02.repository_pattern/">repository pattern</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">openstef.data_classes.model_specifications</span> <span class="kn">import</span> <span class="n">ModelSpecificationDataClass</span>
<span class="kn">from</span> <span class="nn">openstef.data_classes.prediction_job</span> <span class="kn">import</span> <span class="n">PredictionJobDataClass</span>
<span class="kn">from</span> <span class="nn">openstef.metrics.reporter</span> <span class="kn">import</span> <span class="n">Report</span>
<span class="kn">from</span> <span class="nn">openstef.model.regressors.regressor</span> <span class="kn">import</span> <span class="n">OpenstfRegressor</span>
<span class="kn">from</span> <span class="nn">openstef.pipeline.create_basecase_forecast</span> <span class="kn">import</span> <span class="n">create_basecase_forecast_pipeline</span>
<span class="kn">from</span> <span class="nn">openstef.pipeline.create_forecast</span> <span class="kn">import</span> <span class="n">create_forecast_pipeline_core</span>
<span class="kn">from</span> <span class="nn">openstef.pipeline.optimize_hyperparameters</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">optimize_hyperparameters_pipeline_core</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">openstef.pipeline.train_model</span> <span class="kn">import</span> <span class="n">train_model_pipeline_core</span>


<span class="k">class</span> <span class="nc">OpenstefRepository</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Repository that exposes function to interact with OpenSTEF pipelines.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">forecast_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prediction_job</span><span class="p">:</span> <span class="n">PredictionJobDataClass</span><span class="p">,</span>
        <span class="n">input_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">OpenstfRegressor</span><span class="p">,</span>
        <span class="n">modelspecs</span><span class="p">:</span> <span class="n">ModelSpecificationDataClass</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Wrapper around the forecast pipeline of OpenSTEF.</span>
<span class="sd">        The input_data should contain a `load` column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">create_forecast_pipeline_core</span><span class="p">(</span>
            <span class="n">prediction_job</span><span class="p">,</span> <span class="n">input_data</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">modelspecs</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">basecase_forecast_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prediction_job</span><span class="p">:</span> <span class="n">PredictionJobDataClass</span><span class="p">,</span>
        <span class="n">input_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Wrapper around the basecase forecast pipeline of OpenSTEF.</span>
<span class="sd">        The input_data should contain a `load` column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">create_basecase_forecast_pipeline</span><span class="p">(</span><span class="n">prediction_job</span><span class="p">,</span> <span class="n">input_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">train_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prediction_job</span><span class="p">:</span> <span class="n">PredictionJobDataClass</span><span class="p">,</span>
        <span class="n">modelspecs</span><span class="p">:</span> <span class="n">ModelSpecificationDataClass</span><span class="p">,</span>
        <span class="n">input_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">horizons</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">-</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">old_model</span><span class="p">:</span> <span class="n">OpenstfRegressor</span> <span class="o">-</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span>
        <span class="n">OpenstfRegressor</span><span class="p">,</span>
        <span class="n">Report</span><span class="p">,</span>
        <span class="n">ModelSpecificationDataClass</span><span class="p">,</span>
        <span class="n">Tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
    <span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Wrapper around the train model pipeline of OpenSTEF.</span>
<span class="sd">        The input_data should contain a `load` column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">train_model_pipeline_core</span><span class="p">(</span>
            <span class="n">prediction_job</span><span class="p">,</span>
            <span class="n">modelspecs</span><span class="p">,</span>
            <span class="n">input_data</span><span class="p">,</span>
            <span class="n">old_model</span><span class="p">,</span>
            <span class="n">horizons</span><span class="o">-</span><span class="n">horizons</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">optimize_hyperparameters_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prediction_job</span><span class="p">:</span> <span class="n">PredictionJobDataClass</span><span class="p">,</span>
        <span class="n">input_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">n_trials</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">horizons</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">-</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span>
        <span class="n">OpenstfRegressor</span><span class="p">,</span> <span class="n">ModelSpecificationDataClass</span><span class="p">,</span> <span class="n">Report</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Wrapper around the optimize hyperparameters pipeline of OpenSTEF.</span>
<span class="sd">        The input_data should contain a `load` column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">optimize_hyperparameters_pipeline_core</span><span class="p">(</span>
            <span class="n">prediction_job</span><span class="p">,</span> <span class="n">input_data</span><span class="p">,</span> <span class="n">horizons</span><span class="p">,</span> <span class="n">n_trials</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user_guides.html" class="btn btn-neutral float-left" title="User guides" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="concepts.html" class="btn btn-neutral float-right" title="Concepts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022 Contributors to the OpenSTEF project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>