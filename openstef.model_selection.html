<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>openstef.model_selection package &mdash; OpenSTEF  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="openstef.monitoring package" href="openstef.monitoring.html" />
    <link rel="prev" title="openstef.model.regressors package" href="openstef.model.regressors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> OpenSTEF
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="dazls.html">Domain Adaptation for Zero Shot Learning in Sequence (DAZLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_modules.html">Code modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenSTEF</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="code_modules.html">Code modules</a></li>
          <li class="breadcrumb-item"><a href="openstef.html">openstef package</a></li>
      <li class="breadcrumb-item active">openstef.model_selection package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/openstef.model_selection.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="openstef-model-selection-package">
<h1>openstef.model_selection package<a class="headerlink" href="#openstef-model-selection-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-openstef.model_selection.model_selection">
<span id="openstef-model-selection-model-selection-module"></span><h2>openstef.model_selection.model_selection module<a class="headerlink" href="#module-openstef.model_selection.model_selection" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="openstef.model_selection.model_selection.backtest_split_default">
<code class="sig-prename descclassname">openstef.model_selection.model_selection.</code><code class="sig-name descname">backtest_split_default</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">n_folds</em>, <em class="sig-param">test_fraction=0.15</em>, <em class="sig-param">stratification_min_max=True</em>, <em class="sig-param">randomize_fold_split=False</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model_selection.model_selection.backtest_split_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default cross validation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – </p></li>
<li><p><strong>n_folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – </p></li>
<li><p><strong>test_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – </p></li>
<li><p><strong>stratification_min_max</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – </p></li>
<li><p><strong>randomize_fold_split</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Iterable on train, val, test splits</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>We use a generator in order to have lazy estimation and avoid multiple copy of the data.</p>
</dd></dl>

<dl class="function">
<dt id="openstef.model_selection.model_selection.group_kfold">
<code class="sig-prename descclassname">openstef.model_selection.model_selection.</code><code class="sig-name descname">group_kfold</code><span class="sig-paren">(</span><em class="sig-param">input_data</em>, <em class="sig-param">n_folds</em>, <em class="sig-param">randomize_fold_split=True</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model_selection.model_selection.group_kfold" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to group data into groups, according to the date and the number of folds.</p>
<p>Each date gets assigned a number between 0 and n_folds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Input data</p></li>
<li><p><strong>n_folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of folds</p></li>
<li><p><strong>randomize_fold_split</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Indicates if random split needs to be applied</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Grouped data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="openstef.model_selection.model_selection.random_sample">
<code class="sig-prename descclassname">openstef.model_selection.model_selection.</code><code class="sig-name descname">random_sample</code><span class="sig-paren">(</span><em class="sig-param">all_peaks</em>, <em class="sig-param">k</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model_selection.model_selection.random_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Random sampling of numbers out of a np.array.</p>
<p>Implemented due to security sonar cloud not accepting the random built-in functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_peaks</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – List with numbers to sample from</p></li>
<li><p><strong>k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of wanted samples</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Sorted array with the random samples (dates from the peaks)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="openstef.model_selection.model_selection.sample_indices_train_val">
<code class="sig-prename descclassname">openstef.model_selection.model_selection.</code><code class="sig-name descname">sample_indices_train_val</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">peaks</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model_selection.model_selection.sample_indices_train_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample indices of given period length assuming the peaks are evenly spreaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Clean data with features</p></li>
<li><p><strong>peaks</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Data frame of selected peaks to sample the dates from</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>List with the start point of each peak</p></li>
<li><p>Sorted list with the indices corresponding to the peak</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="openstef.model_selection.model_selection.split_data_train_validation_test">
<code class="sig-prename descclassname">openstef.model_selection.model_selection.</code><code class="sig-name descname">split_data_train_validation_test</code><span class="sig-paren">(</span><em class="sig-param">data_</em>, <em class="sig-param">test_fraction=0.1</em>, <em class="sig-param">validation_fraction=0.15</em>, <em class="sig-param">back_test=False</em>, <em class="sig-param">stratification_min_max=True</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model_selection.model_selection.split_data_train_validation_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Split input data into train, test and validation set.</p>
<p>Function for splitting data with features in a train, test and
validation dataset. In an operational setting the following sequence is
returned (when using stratification):</p>
<p>Test &gt;&gt; Train &gt;&gt; Validation</p>
<p>For a back test (indicated with argument “back_test”) the following sequence
is returned:</p>
<p>Train &gt;&gt; Validation &gt;&gt; Test</p>
<p>The ratios of the different types can be set with test_fraction and
validation fraction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Cleaned data with features</p></li>
<li><p><strong>test_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number between 0 and 1 that indicates the desired
fraction of test data.</p></li>
<li><p><strong>validation_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number between 0 and 1 that indicates the
desired fraction of validation data.</p></li>
<li><p><strong>back_test</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Indicates if data is intended for a back test.</p></li>
<li><p><strong>stratification_min_max</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Indicates if validation data must be sampled as
periods, using stratification on min and max values per day.
If True, ‘extreme days’ are ensured to be included in the validation and train sets,
ensuring the validation set to be representative of the train set.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>Train data.</p></li>
<li><p>Validation data.</p></li>
<li><p>Test data.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-openstef.model_selection">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-openstef.model_selection" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="openstef.model.regressors.html" class="btn btn-neutral float-left" title="openstef.model.regressors package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="openstef.monitoring.html" class="btn btn-neutral float-right" title="openstef.monitoring package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022 Contributors to the OpenSTEF project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>