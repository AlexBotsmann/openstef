<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>openstef.model.metamodels package &mdash; OpenSTEF  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="openstef.model.regressors package" href="openstef.model.regressors.html" />
    <link rel="prev" title="openstef.model package" href="openstef.model.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> OpenSTEF
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="user_guides.html">User guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="dazls.html">Domain Adaptation for Zero Shot Learning in Sequence (DAZLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_modules.html">Code modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenSTEF</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="code_modules.html">Code modules</a></li>
          <li class="breadcrumb-item"><a href="openstef.html">openstef package</a></li>
          <li class="breadcrumb-item"><a href="openstef.model.html">openstef.model package</a></li>
      <li class="breadcrumb-item active">openstef.model.metamodels package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/openstef.model.metamodels.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="openstef-model-metamodels-package">
<h1>openstef.model.metamodels package<a class="headerlink" href="#openstef-model-metamodels-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-openstef.model.metamodels.grouped_regressor">
<span id="openstef-model-metamodels-grouped-regressor-module"></span><h2>openstef.model.metamodels.grouped_regressor module<a class="headerlink" href="#module-openstef.model.metamodels.grouped_regressor" title="Permalink to this headline">¶</a></h2>
<p>This module defines the grouped regressor.</p>
<dl class="class">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor">
<em class="property">class </em><code class="sig-prename descclassname">openstef.model.metamodels.grouped_regressor.</code><code class="sig-name descname">GroupedRegressor</code><span class="sig-paren">(</span><em class="sig-param">base_estimator</em>, <em class="sig-param">group_columns</em>, <em class="sig-param">n_jobs=1</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.RegressorMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.MetaEstimatorMixin</span></code></p>
<p>Meta-model that trains an instance of the base estimator for each key of a groupby operation applied on the data.</p>
<p>The base estimator is a sklearn regressor, the groupby is performed on the columns specified in parameters.
Moreover fit and predict methods can be performed in parallel for each group key thanks to joblib.</p>
<p>Example:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>data =  | index | group | x0 | x1 | x3 | y |
        |   0   |   1   | .. | .. | .. | . |
        |   1   |   2   | .. | .. | .. | . |
        |   2   |   1   | .. | .. | .. | . |
        |   3   |   2   | .. | .. | .. | . |

        [<span class="nt">              X              </span>][<span class="nl"> Y </span>]
</pre></div>
</div>
<dl class="simple">
<dt>The GroupedRegressor on the data with the group_columns=’group’ fits 2 models:</dt><dd><ul class="simple">
<li><p>The model 1 with the row 0 and 2, columns x0, x1 and x3 as the features and column y as the target.</p></li>
<li><p>The model 2 with the row 1 and 3, columns x0, x1 and x3 as the features and column y as the target.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_estimator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RegressorMixin</span></code>) – Regressor .</p></li>
<li><p><strong>group_columns</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – Name(s) of the column(s) used as the key for groupby operation.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – default=1
The maximum number of concurrently running jobs,
such as the number of Python worker processes when backend=”multiprocessing”
or the size of the thread-pool when backend=”threading</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor.feature_names_">
<code class="sig-name descname">feature_names_</code><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor.feature_names_" title="Permalink to this definition">¶</a></dt>
<dd><p>All input feature (without group_columns).</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor.estimators_">
<code class="sig-name descname">estimators_</code><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor.estimators_" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionnary that stocks fitted estimators for each group.
The keys are the keys of grouping and the values are the regressors fitted on the grouped data.</p>
</dd></dl>

<dl class="method">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">eval_set=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model.</p>
</dd></dl>

<dl class="method">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor.grouped_compute">
<em class="property">classmethod </em><code class="sig-name descname">grouped_compute</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">group_columns</em>, <em class="sig-param">func</em>, <em class="sig-param">n_jobs=1</em>, <em class="sig-param">eval_set=None</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor.grouped_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the specified function on each group defined by the grouping columns.</p>
<p>It is an utility function used to perform fit and predict on each group.
The df_res is the final dataframe that aggregate the results for each
group. The group_res is a tuple where each field is corresponding to a results for a group. The gb is the
grouping object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame containing the input data necessary for the computation .</p></li>
<li><p><strong>group_columns</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – List of the columns used for the groupby operation</p></li>
<li><p><strong>func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>]) – Function that take the group key and the conrresponding data of this group
and perform the computation on this group.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of concurrently running jobs,</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The tuple of the results of each group, the grouping dataframe and the global dataframe of results.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="openstef.model.metamodels.grouped_regressor.GroupedRegressor.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.grouped_regressor.GroupedRegressor.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a predicion.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openstef.model.metamodels.missing_values_handler">
<span id="openstef-model-metamodels-missing-values-handler-module"></span><h2>openstef.model.metamodels.missing_values_handler module<a class="headerlink" href="#module-openstef.model.metamodels.missing_values_handler" title="Permalink to this headline">¶</a></h2>
<p>This module defines the missing value handler.</p>
<dl class="class">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler">
<em class="property">class </em><code class="sig-prename descclassname">openstef.model.metamodels.missing_values_handler.</code><code class="sig-name descname">MissingValuesHandler</code><span class="sig-paren">(</span><em class="sig-param">base_estimator</em>, <em class="sig-param">missing_values=nan</em>, <em class="sig-param">imputation_strategy=None</em>, <em class="sig-param">fill_value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.RegressorMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.MetaEstimatorMixin</span></code></p>
<p>Class for a meta-models that handles missing values and removes columns filled exclusively by NaN.</p>
<p>It’s a pipeline of:</p>
<blockquote>
<div><ul class="simple">
<li><p>An Imputation transformer for completing missing values.</p></li>
<li><p>A Regressor fitted on the filled data.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_estimator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RegressorMixin</span></code>) – Regressor used in the pipeline.</p></li>
<li><p><strong>missing_values</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The placeholder for the missing values. All occurrences of
<cite>missing_values</cite> will be imputed. For pandas’ dataframes with
nullable integer dtypes with missing values, <cite>missing_values</cite>
should be set to <cite>np.nan</cite>, since <cite>pd.NA</cite> will be converted to <cite>np.nan</cite>.</p></li>
<li><p><strong>imputation_strategy</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The imputation strategy.
- If None no imputation is performed.
- If “mean”, then replace missing values using the mean along
each column. Can only be used with numeric data.
- If “median”, then replace missing values using the median along
each column. Can only be used with numeric data.
- If “most_frequent”, then replace missing using the most frequent
value along each column. Can be used with strings or numeric data.
If there is more than one such value, only the smallest is returned.
- If “constant”, then replace missing values with fill_value. Can be
used with strings or numeric data.</p></li>
<li><p><strong>fill_value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – When strategy == “constant”, fill_value is used to replace all
occurrences of missing_values.
If left to the default, fill_value will be 0 when imputing numerical
data and “missing_value” for strings or object data types.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.feature_names">
<code class="sig-name descname">feature_names</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.feature_names" title="Permalink to this definition">¶</a></dt>
<dd><p>All input feature.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.non_null_columns_">
<code class="sig-name descname">non_null_columns_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.non_null_columns_" title="Permalink to this definition">¶</a></dt>
<dd><p>Valid features used by the regressor.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.n_features_in_">
<code class="sig-name descname">n_features_in_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.n_features_in_" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of input features.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.regressor_">
<code class="sig-name descname">regressor_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.regressor_" title="Permalink to this definition">¶</a></dt>
<dd><p>RegressorMixin
Regressor fitted on valid columns.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.imputer_">
<code class="sig-name descname">imputer_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.imputer_" title="Permalink to this definition">¶</a></dt>
<dd><p>SimpleImputer
Imputer for missig value fitted on valid columns.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.pipeline_">
<code class="sig-name descname">pipeline_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.pipeline_" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipeline
Pipeline that chains the imputer and the regressor.</p>
</dd></dl>

<dl class="attribute">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.feature_importances_">
<code class="sig-name descname">feature_importances_</code><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.feature_importances_" title="Permalink to this definition">¶</a></dt>
<dd><p>ndarray (<a href="#id1"><span class="problematic" id="id2">n_features_in_</span></a>, )
The feature importances from the regressor for valid features and zero otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit model.</p>
</dd></dl>

<dl class="method">
<dt id="openstef.model.metamodels.missing_values_handler.MissingValuesHandler.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.model.metamodels.missing_values_handler.MissingValuesHandler.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a prediction.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openstef.model.metamodels">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-openstef.model.metamodels" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="openstef.model.html" class="btn btn-neutral float-left" title="openstef.model package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="openstef.model.regressors.html" class="btn btn-neutral float-right" title="openstef.model.regressors package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022 Contributors to the OpenSTEF project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>